"use strict";
var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {
    if (kind === "m") throw new TypeError("Private method is not writable");
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;
};
var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var _AnimaLoader_instances, _AnimaLoader_loader, _AnimaLoader_currentStage, _AnimaLoader_formatMessage;
Object.defineProperty(exports, "__esModule", { value: true });
exports.loader = void 0;
const ora_1 = __importDefault(require("ora"));
const log_1 = require("./log");
class AnimaLoader {
    constructor() {
        _AnimaLoader_instances.add(this);
        _AnimaLoader_loader.set(this, void 0);
        _AnimaLoader_currentStage.set(this, '');
        __classPrivateFieldSet(this, _AnimaLoader_loader, (0, ora_1.default)(), "f");
    }
    newStage(msg, showLog = true) {
        const formattedMsg = __classPrivateFieldGet(this, _AnimaLoader_instances, "m", _AnimaLoader_formatMessage).call(this, msg);
        if (__classPrivateFieldGet(this, _AnimaLoader_currentStage, "f") !== '') {
            __classPrivateFieldGet(this, _AnimaLoader_loader, "f").stop();
            showLog && log_1.log.green(`  - ${__classPrivateFieldGet(this, _AnimaLoader_currentStage, "f")} ...OK`);
        }
        __classPrivateFieldSet(this, _AnimaLoader_currentStage, msg, "f");
        __classPrivateFieldGet(this, _AnimaLoader_loader, "f").start(formattedMsg);
    }
    stop(showLog = false) {
        __classPrivateFieldGet(this, _AnimaLoader_loader, "f").stop();
        if (__classPrivateFieldGet(this, _AnimaLoader_currentStage, "f") !== '') {
            showLog && log_1.log.green(`  - ${__classPrivateFieldGet(this, _AnimaLoader_currentStage, "f")} ...OK`);
            __classPrivateFieldSet(this, _AnimaLoader_currentStage, '', "f");
        }
    }
}
_AnimaLoader_loader = new WeakMap(), _AnimaLoader_currentStage = new WeakMap(), _AnimaLoader_instances = new WeakSet(), _AnimaLoader_formatMessage = function _AnimaLoader_formatMessage(msg) {
    return `${msg}...\n`;
};
const loader = new AnimaLoader();
exports.loader = loader;
