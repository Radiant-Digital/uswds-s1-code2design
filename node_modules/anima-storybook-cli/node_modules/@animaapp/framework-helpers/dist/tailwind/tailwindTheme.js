"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getTailwindTheme = void 0;
const utils_1 = require("../utils");
const getTailwindTheme = (dsToken) => {
    return convertDesignTokensToTheme(dsToken);
};
exports.getTailwindTheme = getTailwindTheme;
const convertDesignTokensToTheme = (designTokens) => {
    const colors = convertDesignTokenColorsToTheme(designTokens);
    return { colors };
};
const convertDesignTokenColorsToTheme = (designTokens) => {
    const twThemeTokens = {};
    populateTree(designTokens, twThemeTokens);
    return twThemeTokens;
};
function populateTree(designTokens, toPopulate) {
    for (const key in designTokens) {
        const value = designTokens[key];
        if ((0, utils_1.isDesignToken)(value)) {
            if ((0, utils_1.isTokenValueAlias)(value.$value)) {
                toPopulate[key] = (0, utils_1.resolveAlias)(designTokens, value.$value).$value;
            }
            else {
                toPopulate[key] = value.$value;
            }
        }
        else if (value != null && typeof value === 'object') {
            const newGroup = {};
            toPopulate[key] = newGroup;
            populateTree(value, newGroup);
        }
        else {
            throw new Error(`Unexpected value in design tokens json file for value = ${value} and key = ${key}`);
        }
    }
}
;
